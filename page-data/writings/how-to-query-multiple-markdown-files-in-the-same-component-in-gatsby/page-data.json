{"componentChunkName":"component---src-templates-writing-template-js","path":"/writings/how-to-query-multiple-markdown-files-in-the-same-component-in-gatsby","result":{"data":{"markdownRemark":{"html":"<h3>Intro</h3>\n<p>When I was making my portfolio, it took a while to figure out how to query two markdown files in the same component. I wanted to pass queried markdown data of writings and projects to the WritingsSection and ProjectSection components in <code>/pages/index.js</code> instead of using staticQuery in each of the components.</p>\n<h3>Why was it hard?</h3>\n<p>I thought I could get an object with two allMarkdownRemark data objects to add filter of fileAbsolutePath like this:</p>\n<deckgo-highlight-code   theme=\"synthwave\" >\n          <code slot=\"code\">export const pageQuery = graphql`\n  query {\n    allMarkdownRemark(\n      filter: { fileAbsolutePath: {regex: &quot;/(markdown-projects)/.*\\\\.md$/&quot;} },\n      sort: { fields: frontmatter___date, order: DESC }\n    ) {\n      edges {\n        node {\n          frontmatter {\n            title\n            tags\n            date\n            description\n          }\n        }\n      }\n    }\n    allMarkdownRemark(\n      filter: {fileAbsolutePath: {regex: &quot;/(markdown-writings)/.*\\\\.md$/&quot;}},\n      sort: {fields: frontmatter___date, order: DESC}\n    ) {\n      edges {\n        node {\n          frontmatter {\n            title\n            tags\n            date\n            description\n          }\n        }\n      }\n    }\n  }\n`;</code>\n        </deckgo-highlight-code>\n<p>Expected data object was:</p>\n<deckgo-highlight-code   theme=\"synthwave\" >\n          <code slot=\"code\">  { allMarkdownRemark: {...}, allMarkdownRemark: {...} }</code>\n        </deckgo-highlight-code>\n<p>Of course, the data object became <code>undefined</code> because the same key name cannot exist in an object.</p>\n<h3>How to solve this</h3>\n<p>To solve this problem, you can name the allMarkdownRemark object inside the pageQuery.</p>\n<p>You can just add a key name with a colon before allMarkdownRemark:</p>\n<deckgo-highlight-code   theme=\"synthwave\" >\n          <code slot=\"code\">  query {\n    projects: allMarkdownRemark(\n      filter: { fileAbsolutePath: {regex: &quot;/(markdown-projects)/.*\\\\.md$/&quot;} },\n      sort: { fields: frontmatter___date, order: DESC }\n    ) {\n      edges {\n        node {\n          frontmatter {\n            title\n            tags\n            date\n            description\n          }\n        }\n      }\n    }\n    writings: allMarkdownRemark(\n      filter: {fileAbsolutePath: {regex: &quot;/(markdown-writings)/.*\\\\.md$/&quot;}},\n      sort: {fields: frontmatter___date, order: DESC}\n    ) {\n      edges {\n        node {\n          frontmatter {\n            title\n            tags\n            date\n            description\n          }\n        }\n      }\n    }\n  }</code>\n        </deckgo-highlight-code>\n<p>The data object becomes:</p>\n<deckgo-highlight-code   theme=\"synthwave\" >\n          <code slot=\"code\"> { projects: {...}, writings: {...} };</code>\n        </deckgo-highlight-code>\n<h3>Conclusion</h3>\n<p>Add a key name for each allMarkdownRemark object when you query multiple markdown files in the same component.</p>\n<p>My <code>/pages/index.js/</code> looks like this:</p>\n<deckgo-highlight-code   theme=\"synthwave\" >\n          <code slot=\"code\">const MainView = ({ data }) =&gt; {\n  const { projects, writings } = data;\n\n  const projectsData = projects.edges.map(({ node }) =&gt; {\n    const { title, date, description, tags } = node.frontmatter;\n    const { src } = thumbnail.childImageSharp.fluid;\n    return {\n      name: title,\n      date: date,\n      description: description,\n      tags: tags,\n    };\n  });\n\n  const writingsData = writings.edges.map(({node}) =&gt; {\n    const { title, date, description, tags } = node.frontmatter;\n    return {\n      name: title,\n      date: date,\n      description: description,\n      tags: tags,\n    }\n  })\n\n  return (\n    &lt;Layout&gt;\n      &lt;WritingSection cards={writingsData} /&gt;\n      &lt;ProjectSection cards={projectsData} /&gt;\n    &lt;/Layout&gt;\n  );\n};\n\nexport default MainView;\n\n// pageQuery and styling comes below</code>\n        </deckgo-highlight-code>","frontmatter":{"date":"September 16, 2020","path":"/writings/how-to-query-multiple-markdown-files-in-the-same-component-in-gatsby","title":"How to query multiple markdown files in the same component in Gatsby","stackTags":["Gatsby"]}}},"pageContext":{"title":"/Users/misakimichy/src/misakikoonce.com/src/pages/writings.js"}},"staticQueryHashes":["2330788219"]}